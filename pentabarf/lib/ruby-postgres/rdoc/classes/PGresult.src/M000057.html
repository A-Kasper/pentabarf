<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
  <title>result (PGresult)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 * call-seq:
 *    res.result()
 *
 * Returns an array of tuples (rows, which are themselves arrays) that represent the query result.
 */
static VALUE
pgresult_result(obj)
    VALUE obj;
{
    PGresult *result;
    VALUE ary;
    int nt, nf, i, j;

    result = get_pgresult(obj);
    nt = PQntuples(result);
    nf = PQnfields(result);
    ary = rb_ary_new2(nt);
    for (i=0; i&lt;nt; i++) {
        VALUE row = rb_ary_new2(nf);
        for (j=0; j&lt;nf; j++) {
            VALUE value = fetch_pgresult(result, i, j);
            rb_ary_push(row, value);
        }
        rb_ary_push(ary, row);
    };

    return ary;
}</pre>
</body>
</html>